import{r as p,u as C,j as e,L as v,a as R,b as N,s as T,c as E,d as L,e as F}from"./index-DIj9pAIm.js";import{P as a}from"./index-B3O5FAEy.js";function q(){const[t,i]=p.useState([]),[n,g]=p.useState(!0),[j,o]=p.useState(null);return p.useEffect(()=>{let r=!0;async function f(){try{g(!0);const l=["https://dummyjson.com/products","https://dummyjson.com/products/category/skincare","https://dummyjson.com/products/category/fragrances","https://dummyjson.com/products/category/furniture","https://dummyjson.com/products/category/home-decoration","https://dummyjson.com/products/category/groceries"],d=await Promise.all(l.map(h=>fetch(h).then(y=>y.json()))),u=[],x=new Set;d.forEach(h=>{(h.products||[]).forEach(m=>{x.has(m.id)||(x.add(m.id),u.push(m))})}),r&&(i(u),o(null))}catch(l){r&&o(l.message||"Unexpected error while fetching products.")}finally{r&&g(!1)}}return f(),()=>{r=!1}},[]),{products:t,loading:n,error:j}}function k({product:t}){const i=C(),n=()=>{i(R(t))};return e.jsxs("article",{className:"product-card",children:[e.jsx(v,{to:`/products/${t.id}`,className:"product-image-wrapper",children:e.jsx("img",{src:t.thumbnail,alt:t.title,loading:"lazy",className:"product-image"})}),e.jsxs("div",{className:"product-info",children:[e.jsx("h2",{className:"product-title",children:e.jsx(v,{to:`/products/${t.id}`,children:t.title})}),e.jsxs("p",{className:"product-price",children:["₹",t.price]}),e.jsx("button",{className:"btn primary",onClick:n,children:"Add to Cart"})]})]})}k.propTypes={product:a.shape({id:a.oneOfType([a.number,a.string]).isRequired,title:a.string.isRequired,price:a.oneOfType([a.number,a.string]).isRequired,thumbnail:a.string.isRequired}).isRequired};const A=[{id:1,title:"Festive Combo",description:"Buy 2 cosmetics items and get 25% off on skincare kits.",tag:"Limited Time"},{id:2,title:"Furniture Flash Sale",description:"Modern sofa sets starting at ₹18,999 with free delivery.",tag:"Hot Deal"},{id:3,title:"Fresh Veggies Pack",description:"Weekly subscription boxes with organic vegetables.",tag:"New"}];function M(){return e.jsx("section",{className:"promotions",children:A.map(t=>e.jsxs("article",{className:"promo-card",children:[e.jsx("div",{className:"promo-tag",children:t.tag}),e.jsx("h3",{children:t.title}),e.jsx("p",{children:t.description}),e.jsx("button",{className:"btn small",children:"Shop Now"})]},t.id))})}function O(){const t=C(),i=N(T),n=N(E),{products:g,loading:j,error:o}=q(),[r,f]=p.useState({priceRange:"all",rating:"all"}),l=s=>{t(F(s.target.value))},d=s=>{t(L(s))},u=(s,c)=>{f(w=>({...w,[s]:c}))},x=()=>{f({priceRange:"all",rating:"all"})},h={cosmetics:["skincare","fragrances"],furniture:["furniture","home-decoration"],vegetables:["groceries"],electronics:["smartphones","laptops"]},y=[{id:"all",label:"All Products"},{id:"cosmetics",label:"Cosmetics"},{id:"furniture",label:"Furniture"},{id:"vegetables",label:"Vegetables"},{id:"electronics",label:"Electronics"}],m=["Eggs, Meat & Fish","NeuPass","Ayurveda","Buy More Save More","Deals of the Week","Combo Store"],S=s=>{const c=s.price;switch(r.priceRange){case"low":return c<500;case"mid":return c>=500&&c<=1e3;case"high":return c>1e3;default:return!0}},P=s=>r.rating==="all"?!0:s.rating>=Number(r.rating),b=g.filter(s=>!(n!=="all"&&!(h[n]||[]).includes(s.category)||i.trim()&&!s.title.toLowerCase().includes(i.toLowerCase().trim())||!S(s)||!P(s)));return e.jsxs("section",{className:"product-list",children:[e.jsx("div",{className:"hero-banner",children:e.jsxs("div",{className:"hero-content",children:[e.jsx("p",{className:"hero-label",children:"Daily Essentials"}),e.jsx("h1",{children:"Fresh picks delivered faster"}),e.jsx("p",{children:"Browse cosmetics, furniture, veggies and more curated from live inventory at DummyJSON. Add items to your cart and check out in a snap."}),e.jsxs("div",{className:"hero-actions",children:[e.jsx("button",{className:"btn primary",onClick:()=>d("vegetables"),children:"Shop Vegetables"}),e.jsx("button",{className:"btn secondary",onClick:()=>d("cosmetics"),children:"Explore Cosmetics"})]})]})}),e.jsx("div",{className:"quick-links",children:m.map(s=>e.jsx("button",{className:"quick-link",children:s},s))}),e.jsx("div",{className:"category-toolbar",children:y.map(s=>e.jsx("button",{className:`category-pill ${n===s.id?"active":""}`,onClick:()=>d(s.id),children:s.label},s.id))}),e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{type:"text",className:"search-input",placeholder:"Search for products...",value:i,onChange:l}),e.jsxs("div",{className:"filter-selects",children:[e.jsxs("label",{className:"select-group",children:[e.jsx("span",{children:"Price"}),e.jsxs("select",{value:r.priceRange,onChange:s=>u("priceRange",s.target.value),children:[e.jsx("option",{value:"all",children:"Any price"}),e.jsx("option",{value:"low",children:"Under ₹500"}),e.jsx("option",{value:"mid",children:"₹500 - ₹1,000"}),e.jsx("option",{value:"high",children:"Above ₹1,000"})]})]}),e.jsxs("label",{className:"select-group",children:[e.jsx("span",{children:"Rating"}),e.jsxs("select",{value:r.rating,onChange:s=>u("rating",s.target.value),children:[e.jsx("option",{value:"all",children:"Any rating"}),e.jsx("option",{value:"4",children:"4 ★ & up"}),e.jsx("option",{value:"3",children:"3 ★ & up"})]})]}),e.jsx("button",{className:"btn link",onClick:x,children:"Clear filters"})]})]}),e.jsx(M,{}),j&&e.jsx("p",{children:"Loading products..."}),o&&e.jsxs("p",{className:"error",children:["Error: ",o]}),!j&&!o&&e.jsxs("div",{className:"products-grid",children:[b.map(s=>e.jsx(k,{product:s},s.id)),b.length===0&&e.jsx("p",{children:"No products found. Try another search, category, or filter."})]})]})}export{O as default};
